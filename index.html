<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <html lang="en">
    <title>Duino-Coin | Network statistics</title>
    <link rel="icon" href="assets/stats.png" type="image/png" />
    <link rel="shortcut icon" href="assets/stats.png" type="image/png" />
    <meta name="description" content="View network statistics of Duino-Coin - coin that can be mined with almost everything.">
    <meta name="keywords" content="duino, duinocoin, arduino, crypto, mining, blockchain, cryptocurrency, bitcoin">
    <link rel="canonical" href="https://duinocoin.com" />
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#EE5A24">
    <!-- Open Graph Metadata -->
    <meta property="og:site_name" content="Duino-Coin | Network" />
    <meta property="og:site" content="duinocoin.com" />
    <meta property="og:title" content="Duino-Coin | Network" />
    <meta property="og:description" content="View network statistics of Duino-Coin - coin that can be mined with almost everything." />
    <meta property="og:image" content="assets/stats.png" />
    <meta property="og:url" content="https://duinocoin.com" />
    <meta property="og:type" content="website" />
    <!-- Twitter Metadata -->
    <meta name="twitter:title" content="Duino-Coin | Network">
    <meta name="twitter:description" content="View network statistics of Duino-Coin - coin that can be mined with almost everything.">
    <meta name="twitter:image" content="assets/stats.png">
    <meta name="twitter:site" content="@DuinoCoin">
    <meta name="twitter:creator" content="@DuinoCoin">
    <!-- Imports -->
    <link rel="stylesheet" href="https://unpkg.com/bulma-modal-fx/dist/css/modal-fx.min.css">
    <link rel="stylesheet" type="text/css" href="assets/bulma.min.css">
    <link rel="stylesheet" type="text/css" href="assets/bulma-prefers-dark.min.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" type="text/css" href="ducostyle.css">
    <script src="assets/fontawesome.js"></script>
    <script src="assets/jquery.min.js"></script>
</head>

<body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://duinocoin.com">
                <img src="assets/duco.svg">
            </a>
            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="DuinoNavbar">
                <span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span>
            </a>
        </div>
        <div id="DuinoNavbar" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="https://github.com/revoxhere/duino-coin/blob/gh-pages/assets/whitepaper.pdf">
                    <span class="icon">
                        <i class="fa fa-book" style="color:#ff7a3e;" aria-hidden="true"></i>
                    </span>
                    <span>Whitepaper</span>
                </a>
                <a class="navbar-item" href="https://explorer.duinocoin.com">
                    <span class="icon">
                        <i class="fa fa-poll" style="color:#ff6a48;" aria-hidden="true"></i>
                    </span>
                    <span>Network</span>
                </a>
                <a class="navbar-item" href="https://duinocoin.com/donate.html">
                    <span class="icon">
                        <i class="fa fa-heart" style="color:#ff5a54;" aria-hidden="true"></i>
                    </span>
                    <span>Donate</span>
                </a>
                <a class="navbar-item" href="https://duinocoin.com/team.html">
                    <span class="icon">
                        <i class="fa fa-user-friends" style="color:#ff4962;" aria-hidden="true"></i>
                    </span>
                    <span>Team</span>
                </a>
                <a class="navbar-item" href="https://duinocoin.com/apps.html">
                    <span class="icon">
                        <i class="fa fa-lightbulb" style="color:#ff3870;" aria-hidden="true"></i>
                    </span>
                    <span>Apps</span>
                </a>
                <a class="navbar-item" href="https://duinocoin.com/contact.html">
                    <span class="icon">
                        <i class="fa fa-envelope" style="color:#ff2780;" aria-hidden="true"></i>
                    </span>
                    <span>Contact</span>
                </a>
            </div>
            <div class="navbar-end">
                <a class="navbar-item is-hidden-mobile" href="https://twitter.com/DuinoCoin/">
                    <i class="fab fa-twitter icon fa-lg" aria-hidden="true"></i>
                </a>
                <a class="navbar-item is-hidden-mobile" href="https://www.reddit.com/r/Duinocoin/">
                    <i class="fab fa-reddit icon fa-lg" aria-hidden="true"></i>
                </a>
                <a class="navbar-item is-hidden-mobile" href="https://discord.gg/kvBkccy">
                    <i class="fab fa-discord icon fa-lg" aria-hidden="true"></i>
                </a>
                <a class="navbar-item is-hidden-mobile" href="https://github.com/revoxhere/duino-coin">
                    <i class="fab fa-github icon fa-lg" aria-hidden="true"></i>
                </a>
                <div class="navbar-item">
                    <a class="button is-duco is-rounded" style="border:none" href="https://duinocoin.com/getting-started.html">
                        <strong>Get started</strong>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    <section class="section">
        <div class="container">
            <!-- STATISTICS -->
            <div class="panel blur" style="overflow:hidden">
                <p class="panel-heading heading is-size-5">
                    <span style="color:#ff7a3e">Live</span> Duino network statistics
                </p>
                <div class="panel-content">
                    <div class="columns is-multiline" style="margin:auto !important">
                        <div class="column is-full">
                            <nav class="level">
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            Net hashrate
                                        </p>
                                        <p class="title" id="hashrate">
                                            Please wait
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            Users
                                        </p>
                                        <p class="title" id="registeredusers">
                                            Please wait
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            DUCO in circulation
                                        </p>
                                        <p class="title" id="allmined">
                                            Please wait
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            Net energy usage
                                        </p>
                                        <p class="title" id="watt_usage">
                                            Please wait
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            Mined shares
                                        </p>
                                        <p class="title" id="shares">
                                            Please wait
                                        </p>
                                    </div>
                                </div>
                            </nav>
                        </div>
                        <div class="column is-full">
                            <nav class="level">
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            Arduinos
                                        </p>
                                        <p class="title" id="arduinos">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            ESP8266S
                                        </p>
                                        <p class="title" id="esp8266s">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            ESP32S
                                        </p>
                                        <p class="title" id="esp32s">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            RASPBERRY PIS
                                        </p>
                                        <p class="title" id="rpis">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            CPUS
                                        </p>
                                        <p class="title" id="cpus">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            PHONES
                                        </p>
                                        <p class="title" id="phones">
                                            0
                                        </p>
                                    </div>
                                </div>
                                <div class="level-item has-text-centered">
                                    <div>
                                        <p class="heading is-size-6">
                                            OTHERS
                                        </p>
                                        <p class="title" id="others">
                                            0
                                        </p>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns is-multiline">
                <div class="column is-half">
                    <!-- EXPLORER -->
                    <form class="panel blur">
                        <p class="panel-heading heading is-size-5">
                            Chain explorer
                        </p>
                        <div class="container m-4">
                            <div class="field has-addons">
                                <p class="control is-expanded">
                                    <input class="input is-rounded ducoinput" id="search_input" type="text" placeholder="Enter wallet name, transaction or block hash" name="search">
                                </p>
                                <p class="control">
                                    <a onclick="button_search()" class="button is-rounded is-full is-search">
                                        Search
                                    </a>
                                </p>
                            </div>
                            <p class="is-size-5 has-text-centered" id="transactionstext1">
                                Enter something in the search box above to search through the chain
                            </p>
                            <p class="is-size-6" id="transactionstext2"></p>
                            <br>
                            <div class="columns is-mobile">
                                <div class="column is-half">
                                    <div class="divider">Last transactions</div>
                                    <p class="is-size-6 is-size-6" id="transactionstext3">
                                        Please wait
                                    </p>
                                </div>
                                <div class="column is-half">
                                    <div class="divider">Last blocks</div>
                                    <p class="is-size-6 is-size-6" id="transactionstext4">
                                        Please wait
                                    </p>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- CHARTS -->
                <div class="column is-half">
                    <div class="columns is-multiline">
                        <div class="column is-full">
                            <div class="panel blur">
                                <p class="panel-heading heading is-size-5">
                                    Charts
                                </p>
                                <div class="columns is-multiline m-3">
                                    <div class="column">
                                        <div class="panel-block">
                                            <a class="modal-button" data-target="modal-prices">
                                                <img src="https://server.duinocoin.com/prices.png">
                                            </a>
                                        </div>
                                    </div>
                                    <div class="column">
                                        <div class="panel-block">
                                            <a class="modal-button" data-target="modal-miners">
                                                <img src="https://server.duinocoin.com/minerchart.png">
                                            </a>
                                        </div>
                                    </div>
                                    <div class="column">
                                        <div class="panel-block">
                                            <a class="modal-button" data-target="modal-balances">
                                                <img src="https://server.duinocoin.com/balancechart.png">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column is-full">
                            <!-- NODES -->
                            <div class="panel blur" style="overflow:hidden">
                                <p class="panel-heading heading is-size-5">
                                    Mining nodes
                                </p>
                                <div class="level is-centered m-3 is-multiline">
                                    <div class="level-item has-text-left">
                                        <div>
                                            <p class="heading is-size-6">
                                                <i class="fa fa-server"></i>&nbsp;
                                                MASTER
                                            </p>
                                            <p class="title is-size-6" id="hashrate">
                                                CPU:
                                                <b id="master_cpu">
                                                    ...
                                                </b><br>
                                                RAM:
                                                <b id="master_ram">
                                                    ...
                                                </b><br>
                                                Clients:
                                                <b id="master_connections">
                                                    ...
                                                </b>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="level-item has-text-left">
                                        <div>
                                            <p class="heading is-size-6">
                                                <i class="fa fa-star"></i>&nbsp;
                                                STAR
                                            </p>
                                            <p class="title is-size-6" id="hashrate">
                                                CPU:
                                                <b id="star_cpu">
                                                    ...
                                                </b><br>
                                                RAM:
                                                <b id="star_ram">
                                                    ...
                                                </b><br>
                                                Clients:
                                                <b id="star_connections">
                                                    ...
                                                </b>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="level-item has-text-left">
                                        <div>
                                            <p class="heading is-size-6">
                                                <i class="fa fa-rocket"></i>&nbsp;
                                                BEYOND
                                            </p>
                                            <p class="title is-size-6" id="hashrate">
                                                CPU:
                                                <b id="beyond_cpu">
                                                    ...
                                                </b><br>
                                                RAM:
                                                <b id="beyond_ram">
                                                    ...
                                                </b><br>
                                                Clients:
                                                <b id="beyond_connections">
                                                    ...
                                                </b>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="level-item has-text-left">
                                        <div>
                                            <p class="heading is-size-6">
                                                <i class="fa fa-heart-broken"></i>&nbsp;
                                                SVKO
                                            </p>
                                            <p class="title is-size-6" id="hashrate">
                                                CPU:
                                                <b id="svko_cpu">
                                                    ...
                                                </b><br>
                                                RAM:
                                                <b id="svko_ram">
                                                    ...
                                                </b><br>
                                                Clients:
                                                <b id="svko_connections">
                                                    ...
                                                </b>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="level-item has-text-left">
                                        <div>
                                            <p class="heading is-size-6">
                                                <i class="fa fa-plus"></i>&nbsp;
                                                NULL
                                            </p>
                                            <p class="title is-size-6" id="hashrate">
                                                CPU:
                                                <b id="null_cpu">
                                                    ...
                                                </b><br>
                                                RAM:
                                                <b id="null_ram">
                                                    ...
                                                </b><br>
                                                Clients:
                                                <b id="null_connections">
                                                    ...
                                                </b>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ACTIVE WORKERS -->
                <div class="column is-full" id="workersdiv">
                    <div class="panel blur">
                        <div class="panel-heading">
                            <p class="heading is-size-5">
                                Active workers
                            </p>
                            <div class="columns is-multiline mt-1 is-mobile">
                                <div class="column is-narrow">
                                    <p class="is-size-6 has-text-grey-dark">
                                        <i class="fa fa-times-circle has-text-danger"></i>
                                        unverified account
                                    </p>
                                </div>
                                <div class="column is-narrow">
                                    <p class="is-size-6 has-text-grey-dark">
                                        <i class="fa fa-check has-text-success"></i>
                                        verified account
                                    </p>
                                </div>
                                <div class="column is-narrow">
                                    <p class="is-size-6 has-text-grey-dark">
                                        <span class="tag">123</span>
                                        amount of workers
                                    </p>
                                </div>
                            </div>
                        </div>
                        <p id="workers" class="is-size-6 is-size-6 m-3">
                            <button id="loadworkers" class="button is-rounded" onclick="fill_worker_list()">
                                Load all workers
                            </button>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- FOOTER -->
    <footer class="footer">
        <div class="content has-text-centered">
            <strong>Duino-Coin</strong> website by <strong><a href="https://revoxhere.github.io">Robert "revox" Piotrowski</a></strong> from the <strong>Duino team</strong> 2019-2021
            <br>Hosted by <strong><a href="https://kristian-kramer.com">Kristian "Tech1k" Kramer</a></strong> and/or <strong><a href="https://pages.github.com">GitHub Pages</a></strong>
            <br>Made with <strong><a href="https://bulma.io">Bulma</a>
        </div>
    </footer>
    <div id="modal-prices" class="modal modal-fx-fadeInScale">
        <div class="modal-background"></div>
        <div class="modal-content">
            <img src=" https://server.duinocoin.com/prices.png" alt="Price chart">
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
    </div>
    <div id="modal-miners" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
            <img src=" https://server.duinocoin.com/minerchart.png" alt="Miner distribution chart">
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
    </div>
    <div id="modal-balances" class="modal modal-fx-fadeInScale">
        <div class="modal-background"></div>
        <div class="modal-content">
            <img src=" https://server.duinocoin.com/balancechart.png" alt="Balance distribution chart">
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => { // HAMBURGER MENU
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
        if ($navbarBurgers.length > 0) {
            $navbarBurgers.forEach(el => { // Add a click event on each of burger menus
                el.addEventListener('click', () => {
                    const target = el.dataset.target; // Get the target from the "data-target" attribute
                    const $target = document.getElementById(target);
                    el.classList.toggle('is-active'); // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                    $target.classList.toggle('is-active');
                });
            });
        }
    });

    let duco_price = 0.00045;
    let load_workers = false;
    let url_string = window.location;
    let url = new URL(url_string);
    let to_search = url.searchParams.get("search");

    function update_element(element, value) {
        $(`#${element}`).html(value);
    }


    function round_to(precision, value) {
        power_of_ten = 10 ** precision;
        return Math.round(value * power_of_ten) / power_of_ten;
    }


    function fill_worker_list() {
        $("#loadworkers").addClass("is-loading")
        fetch("https://server.duinocoin.com/statistics_miners")
            .catch(function(error) {
                console.log(error);
            })
            .then(response => response.json())
            .then(data => {
                data = data.result;
                let workers = `<ul class="workers">`
                let counter = 0;
                let worker_counter = 0;
                let sorted_workers = [];
                for (worker in data) {
                    sorted_workers.push({
                        "User": worker,
                        "Verified": data[worker]["v"],
                        "Miners": data[worker]["w"]
                    })
                }
                sorted_workers.sort((a, b) => b.Miners - a.Miners);
                for (let i = 0; i < sorted_workers.length; i++) {
                    let worker = sorted_workers[i];

                    if (worker.Verified == "yes") {
                        workers +=
                            `<li class="has-text-success">
                                  <i class="fas fa-check"></i>
                                  <a onclick="link_search('${worker.User}')">` +
                            worker.User +
                            `</a><b class="tag">` +
                            worker.Miners +
                            `</b></li>`;
                    } else {
                        workers +=
                            `<li class="has-text-danger">
                                  <i class="fas fa-times-circle"></i>
                                  <a onclick="link_search('${worker.User}')">` +
                            worker.User +
                            `</a>
                        <b class="tag">` +
                            worker.Miners +
                            `</b></li>`;
                    }

                    worker_counter += worker.Miners;
                    counter++;
                }
                workers += `</ul>`;
                document.getElementById("workers").innerHTML = workers;
                $("#allworkers").text("(" + worker_counter + " workers on " + counter + " accounts)");
            });
    }


    const scientific_prefix = (value) => {
        value = parseFloat(value);
        if (value / 1000000 > 0.5)
            value = round_to(4, value / 1000000) + " M";
        else if (value / 1000 > 0.5)
            value = round_to(4, value / 1000) + " k";
        else
            value = round_to(4, value) + " ";
        return value;
    };

    function update_stats() {
        fetch("https://server.duinocoin.com/api.json")
            .catch(function(error) {
                console.log(error);
            })
            .then(response => response.json())
            .then(data => {
                duco_price = data["Duco price"];

                update_element("hashrate", data["Pool hashrate"])

                update_element("registeredusers", data["Registered users"])

                update_element("allmined", scientific_prefix(data["All-time mined DUCO"]));

                update_element("watt_usage", data["Net energy usage"])

                update_element("shares", scientific_prefix(data["Mined blocks"]))

                update_element("arduinos", data["Miner distribution"]["Arduino"])

                update_element("esp8266s", data["Miner distribution"]["ESP8266"])

                update_element("esp32s", Math.round(data["Miner distribution"]["ESP32"] / 2))

                update_element("rpis", Math.round(data["Miner distribution"]["RPi"] / 4))

                update_element("cpus", Math.round(data["Miner distribution"]["Web"] +
                    data["Miner distribution"]["CPU"] / 4))

                update_element("phones", Math.round(data["Miner distribution"]["Phone"] / 4))

                update_element("others", data["Miner distribution"]["Other"])

                /* Nodes */

                update_element("master_connections", data["Active connections"])
                update_element("master_ver", data["Server version"])
                update_element("master_cpu", round_to(1, data["Server CPU usage"]) + "%")
                update_element("master_ram", round_to(1, data["Server RAM usage"]) + "%")
                update_element("master_threads", data["Open threads"])
            })
    }


    function last_explorer_hashes() {
        fetch("https://server.duinocoin.com/transactions.json")
            .catch(function(error) {
                console.log(error);
            })
            .then(response => response.json())
            .then(data => {

                hashes = []
                for (hash in data) {
                    hashes.push(data[hash])
                }

                transaction_hashes_html = "";
                for (hash in hashes.reverse()) {
                    if (hash >= 5) break
                    this_hash = hashes[hash].Hash;
                    if (this_hash.length == 40) {
                        transaction_hashes_html += `<a class='transaction2 monospace' onclick="link_search('${this_hash}')">` + this_hash.substring(0, 40) + "</a><br>";
                    } else {
                        transaction_hashes_html += `<a class='transaction1 monospace' onclick="link_search('${this_hash}')">` + this_hash.substring(0, 40) + "</a><br>";
                    }
                }
                $("#transactionstext3").html(transaction_hashes_html);
            })
        fetch("https://server.duinocoin.com/foundBlocks.json")
            .catch(function(error) {
                console.log(error);
            })
            .then(response => response.json())
            .then(data => {
                let last = [];
                for (hash in data) {
                    last.push(hash);
                }

                block_hashes_html = "";
                for (hash in last.reverse()) {
                    if (hash >= 5) break
                    this_hash = last[hash];
                    if (this_hash.length == 40) {
                        block_hashes_html += `<a class='block2 monospace' onclick="link_search('${this_hash}')">` + this_hash.substring(0, 40) + "</a><br>";
                    } else {
                        block_hashes_html += `<a class='block1 monospace' onclick="link_search('${this_hash}')">` + this_hash.substring(0, 40) + "</a><br>";
                    }
                }
                $("#transactionstext4").html(block_hashes_html);
            })
    }

    function get_prefix(symbol, value) {
        value = parseFloat(value);
        if (value / 1000000000 > 0.5)
            value = round_to(2, value / 1000000000) + " G" + symbol;
        else if (value / 1000000 > 0.5)
            value = round_to(2, value / 1000000) + " M" + symbol;
        else if (value / 1000 > 0.5)
            value = round_to(2, value / 1000) + " k" + symbol;
        else
            value = round_to(2, value) + " " + symbol;
        return value;
    }

    String.prototype.escape = function() {
        var tagsToReplace = {
            '&': ' ',
            '\\': ' ',
            '/': ' ',
            '(': ' ',
            ')': ' ',
            '`': ' ',
            '<': ' ',
            '>': ' '
        };
        return this.replace(/[&<>]/g, function(tag) {
            return tagsToReplace[tag] || tag;
        });
    };

    function search(searched_string) {
        let cont = true;
        if (searched_string) {
            console.log(searched_string);
            window.history.pushState('Duino-Coin | Network statistics', 'Duino-Coin | Network statistics', `?search=${searched_string}`);
            $("#transactionstext1").html(`<div class="divider">Results&nbsp;for&nbsp;<span style="overflow:hidden"><a onclick="link_search('${searched_string}')">${searched_string}</a></span></div>`);
        }
        if (cont) {
            $.getJSON("https://server.duinocoin.com/transactions/" + searched_string, function(data) {
                    if (data.success == true && data.result != "No transaction found") {
                        cont = false;
                        let amount_usd = data.result.amount * duco_price;
                        if (searched_string.length == 40) transaction_type = "DUCO-S1";
                        else transaction_type = "XXHASH"

                        found_transaction_html = `
                            <table class="table is-narrow is-fullwidth">
                                <tbody>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-info-circle"></i>
                                                <span>Type</span> 
                                            </span>
                                        </th>
                                        <th>
                                            Transaction #${data.result.id} (${transaction_type})
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-calendar"></i>
                                                <span>Timestamp</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${data.result.datetime}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-arrow-right"></i>
                                                <span>Output (sender)</span>
                                            </span>
                                        </th>
                                        <th>
                                            <a onclick="link_search('${data.result.sender}')">
                                                ${data.result.sender}
                                            </a>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-arrow-left"></i>
                                                <span>Input (recipient)</span>
                                            </span>
                                        </th>
                                        <th>
                                            <a onclick="link_search('${data.result.recipient}')">
                                                ${data.result.recipient}
                                            </a>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-coins"></i>
                                                <span>Transferred amount</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${data.result.amount} DUCO
                                            ($${round_to(4, amount_usd)})
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-envelope"></i>
                                                <span>Memo</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${data.result.memo}
                                        </th>
                                    </tr>
                                </tbody>
                            </table>`

                        update_element("transactionstext2", found_transaction_html);
                    }
                })
                .fail(function(error) {
                    console.log(error.responseText);
                    if (error.responseText.includes("500")) error = "500 - internal server error";
                    else if (error.responseText.includes("429")) error = "429 - too many requests (slow down)";
                    else if (error.responseText.includes("404")) error = "404 - nothing interesting found";
                    found_transaction_html = `<ul class="is-size-6"><li>` +
                        `<i class='fas fa-info-circle'></i>` +
                        `&nbsp;Error: <b>${error}</b> 🤦‍♀️</li></ul>`;
                    update_element("transactionstext2", found_transaction_html);
                });
        }
        if (cont) {
            $.getJSON('https://server.duinocoin.com/users/' + searched_string, function(data) {
                    if (data.success == true) {
                        cont = false;
                        let amount_usd = data.result.balance.balance * duco_price;

                        miner_str = "";
                        miner_count = 0;
                        if (data.result.miners.length) {
                            let threaded_miners = {};
                            user_miners = data.result.miners;

                            for (let miner in user_miners) {
                                let miner_wallet_id = user_miners[miner]["wd"];
                                if (!miner_wallet_id) miner_wallet_id = Math.random();
                                const miner_hashrate = user_miners[miner]["hashrate"];
                                const miner_rejected = user_miners[miner]["rejected"];
                                const miner_accepted = user_miners[miner]["accepted"];

                                if (!threaded_miners[miner_wallet_id]) {
                                    threaded_miners[miner_wallet_id] = user_miners[miner];
                                    threaded_miners[miner_wallet_id]["threads"] = 1;
                                    miner_count += 1;
                                    continue;
                                } else if (threaded_miners[miner_wallet_id]) {
                                    threaded_miners[miner_wallet_id]["hashrate"] += miner_hashrate;
                                    threaded_miners[miner_wallet_id]["rejected"] += miner_rejected;
                                    threaded_miners[miner_wallet_id]["accepted"] += miner_accepted;
                                    threaded_miners[miner_wallet_id]["threads"] += 1;
                                    continue;
                                }
                            }

                            i = 0;
                            for (miner in threaded_miners) {
                                if (threaded_miners[miner]["identifier"] != "None") {
                                    miner_str += "<b>" +
                                        threaded_miners[miner]["identifier"] +
                                        "</b> <span class='has-text-grey'>(" +
                                        threaded_miners[miner]["software"] +
                                        ")</span> - " +
                                        get_prefix("", threaded_miners[miner]["accepted"]) + "/" +
                                        get_prefix("", (threaded_miners[miner]["accepted"] + threaded_miners[miner]["rejected"])) +
                                        ", <b>" + get_prefix("H/s", threaded_miners[miner]["hashrate"]) + `</b> (${((threaded_miners[miner]["threads"] == 1) ? ("1 thread") : (`${threaded_miners[miner]["threads"]} threads`))}) <br>`;
                                } else {
                                    miner_str += "<b>" + threaded_miners[miner]["software"] + "</b> - " +
                                        threaded_miners[miner]["accepted"] + "/" +
                                        (threaded_miners[miner]["accepted"] + threaded_miners[miner]["rejected"]) +
                                        ", <b>" + get_prefix("H/s", threaded_miners[miner]["hashrate"]) + `</b> (${((threaded_miners[miner]["threads"] == 1) ? ("1 thread") : (`${threaded_miners[miner]["threads"]} threads`))}) <br>`;
                                }

                                if (i > 10) {
                                    miner_str += "And " + (miner_count - i) + " more miner(s)...";
                                    break;
                                }
                                i += 1;
                            }
                        } else {
                            miner_str += "No miners found for that user";
                        }

                        tx_str = "";
                        i = 0;
                        if (data["result"]["transactions"].length) {
                            for (transaction in data["result"]["transactions"].reverse()) {
                                if (data["result"]["transactions"][transaction]["sender"] == data["result"]["balance"]["username"]) {
                                    tx_str += "<span class='has-text-grey'>" +
                                        data["result"]["transactions"][transaction]["datetime"] +
                                        "</span> Sent <span class='has-text-danger-dark'>" +
                                        " <b>" +
                                        Math.round(data["result"]["transactions"][transaction]["amount"] * 1000) / 1000 +
                                        " DUCO</b></span> to " +
                                        `<a onclick="link_search('${data["result"]["transactions"][transaction]["recipient"]}')">` +
                                        "<b>" +
                                        data["result"]["transactions"][transaction]["recipient"] + "</a></b> " + `<a onclick="link_search('${data["result"]["transactions"][transaction]["hash"]}')">(` + data["result"]["transactions"][transaction]["hash"].substr(data["result"]["transactions"][transaction]["hash"].length - 8) + ")</a><br>"
                                } else {
                                    tx_str += "<span class='has-text-grey'>" +
                                        data["result"]["transactions"][transaction]["datetime"] +
                                        "</span> Received <span class='has-text-success-dark'>" +
                                        "<b>" +
                                        Math.round(data["result"]["transactions"][transaction]["amount"] * 1000) / 1000 +
                                        " DUCO</b></span> from " +
                                        `<a onclick="link_search('${data["result"]["transactions"][transaction]["sender"]}')">` + "<b>" +
                                        data["result"]["transactions"][transaction]["sender"] + "</a></b> " + `<a onclick="link_search('${data["result"]["transactions"][transaction]["hash"]}')">(` + data["result"]["transactions"][transaction]["hash"].substr(data["result"]["transactions"][transaction]["hash"].length - 8) + ")</a><br>"
                                }

                                i += 1;
                                if (i > 10) {
                                    break;
                                }
                            }
                        } else {
                            tx_str += "No transactions found for that user";
                        }

                        found_user_html = `
                            <table class="table is-narrow is-fullwidth">
                                <tbody>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-user"></i>
                                                <span>Wallet name</span> 
                                            </span>
                                        </th>
                                        <th>
                                            <a onclick="link_search('${searched_string}')">
                                                ${searched_string}
                                            </a>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-coins"></i>
                                                <span>Balance</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${round_to(10, data.result.balance.balance)} DUCO
                                            ($${round_to(4, amount_usd)})
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-check-circle"></i>
                                                <span>Verified</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${data.result.balance.verified}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-calendar"></i>
                                                <span>Creation date</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${data.result.balance.created}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2">
                                            <span class="icon-text">
                                                <i class="icon fa fa-cog"></i>
                                                <span>Miners</span>
                                            </span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2">
                                            ${miner_str}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2">
                                            <span class="icon-text">
                                                <i class="icon fas fa-people-arrows"></i>
                                                <span>Transactions</span>
                                            </span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2">
                                            ${tx_str}
                                        </th>
                                    </tr>
                                </tbody>
                            </table>`

                        update_element("transactionstext2", found_user_html);
                    }
                })
                .fail(function(error) {
                    if (error.responseText.includes("500")) error = "500 - internal server error";
                    else if (error.responseText.includes("429")) error = "429 - too many requests (slow down)";
                    else if (error.responseText.includes("404")) error = "404 - nothing interesting found";
                    found_transaction_html = `<ul class="is-size-6"><li>` +
                        `<i class='fas fa-info-circle'></i>` +
                        `&nbsp;Error: <b>${error}</b> 🤦‍♀️</li></ul>`;
                    update_element("transactionstext2", found_transaction_html);
                });
        }
        if (cont) {
            $.getJSON('https://server.duinocoin.com/foundBlocks.json', function(data) {
                    cont = false;
                    let found = data[searched_string]
                    if (searched_string != "" && found != "" && found != undefined) {
                        cont = false;
                        let amount_usd = found["Amount generated"] * duco_price;
                        if (searched_string.length == 40) block_type = "DUCO-S1";
                        else block_type = "XXHASH"

                        found["Finder"] = found["Finder"].replace("(DUCO-S1)", "")
                        found["Finder"] = found["Finder"].replace("(XXHASH)", "")

                        found_block_html = `
                            <table class="table is-fullwidth">
                                <tbody>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-info-circle"></i>
                                                <span>Type</span>
                                            </span>
                                        </th>
                                        <th>
                                            Block (${block_type})
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-calendar"></i>
                                                <span>Timestamp</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${found["Date"]} ${found["Time"]}
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-user-tie"></i>
                                                <span>Finder</span>
                                            </span>
                                        </th>
                                        <th>
                                            <a onclick="link_search('${found["Finder"]}')">
                                                ${found["Finder"]}
                                            </a>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>
                                            <span class="icon-text">
                                                <i class="icon fa fa-coins"></i>
                                                <span>Generated amount</span>
                                            </span>
                                        </th>
                                        <th>
                                            ${found["Amount generated"]} DUCO
                                            ($${round_to(4, amount_usd)})
                                        </th>
                                    </tr>
                                </tbody>
                            </table>`

                        update_element("transactionstext2", found_block_html);
                    }
                })
                .fail(function(error) {
                    if (error.responseText.includes("500")) error = "500 - internal server error";
                    else if (error.responseText.includes("429")) error = "429 - too many requests (slow down)";
                    else if (error.responseText.includes("404")) error = "404 - nothing interesting found";
                    found_transaction_html = `<ul class="is-size-6"><li>` +
                        `<i class='fas fa-info-circle'></i>` +
                        `&nbsp;Error: <b>${error}</b> 🤦‍♀️</li></ul>`;
                    update_element("transactionstext2", found_transaction_html);
                });
        }
        if (cont) $("#transactionstext2").text(`Nothing interesting found for your query 🤷`);
    }


    function update_pools() {
        fetch("https://server.duinocoin.com/all_pools")
            .catch(function(error) {
                console.log(error);
            })
            .then(response => response.json())
            .then(data => {
                if (data.success === true) {
                    let pools = {};
                    data.result.forEach(pool => {
                        pools[pool["name"]] = pool;
                    });
                    // Update pool info, add new pools here

                    // Star pool
                    try {
                        let star1_data = pools["star-pool-1"];
                        update_element("star_connections", star1_data["connections"]);
                        update_element("star_cpu", round_to(1, parseFloat(star1_data["cpu"])) + "%");
                        update_element("star_ram", round_to(1, parseFloat(star1_data["ram"])) + "%");
                    } catch (e) { console.log(e) };

                    // Beyond pool
                    try {
                        let beyond1_data = pools["beyond-pool-1"];
                        let beyond2_data = pools["beyond-pool-3"];
                        update_element("beyond_connections", pools["beyond-pool-1"]["connections"] + pools["beyond-pool-2"]["connections"]);
                        update_element("beyond_cpu", round_to(1, parseFloat(beyond1_data["cpu"])) + "%");
                        update_element("beyond_ram", round_to(1, parseFloat(beyond1_data["ram"])) + "%");

                        update_element("beyond_connections2", pools["beyond-pool-3"]["connections"] + pools["beyond-pool-4"]["connections"]);
                        update_element("beyond_cpu2", round_to(1, parseFloat(beyond2_data["cpu"])) + "%");
                        update_element("beyond_ram2", round_to(1, parseFloat(beyond2_data["ram"])) + "%");
                    } catch (e) { console.log(e) };

                    // Svko pool
                    try {
                        let svko1_data = pools["svko-pool-1"];
                        let svko2_data = pools["svko-pool-2"];

                        update_element("svko_connections", svko2_data["connections"] + svko1_data["connections"]);
                        update_element("svko_cpu", round_to(1, parseFloat(svko1_data["cpu"])) + "%");
                        update_element("svko_ram", round_to(1, parseFloat(svko1_data["ram"])) + "%");
                    } catch (e) { console.log(e) };

                    // Null pool
                    try {
                        let null_data = pools["null-pool-1"];

                        update_element("null_connections", null_data["connections"]);
                        update_element("null_cpu", round_to(1, parseFloat(null_data["cpu"])) + "%");
                        update_element("null_ram", round_to(1, parseFloat(null_data["ram"])) + "%");
                    } catch (e) { console.log(e) };

                    // End of list of pools to update
                }
            })
    }

    update_stats();
    window.setInterval(update_stats, 5000);

    last_explorer_hashes();
    window.setInterval(last_explorer_hashes, 5000);

    update_pools();
    window.setInterval(update_pools, 5000);

    $("#search_input").on('keydown', function(e) {
        if (e.which === 13) {
            e.preventDefault();
            button_search();
        }
    });

    function button_search() {
        to_search = $('#search_input').val().escape();
        console.log("Button search for ", to_search.escape())
        search(to_search.escape());
    }

    function link_search(to_search) {
        console.log("Link search for ", to_search.escape())
        search(to_search.escape());
    }

    if (to_search.escape()) search(to_search.escape());
    </script>
    <script type="text/javascript" src="https://unpkg.com/bulma-modal-fx/dist/js/modal-fx.min.js"></script>
</body>

</html>